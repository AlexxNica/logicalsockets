## Logicalsockets

### What?
Separate client connections from your application. Great for websocket or TCP servers.

### Why?
Let your main application crash or simply be restarted without disconnecting any clients. Need to update your websocket server application while users are still connected? No problem. They won't notice a thing.


### Benefits
* Handle more users by running a number of listening sockets.
* Scale out your application by running more application processes.
* Application getting popular? Spread the load across a cluster of machines.
* Application crashes don't disconnect your users, seemlessly restarting the application.
* Clients may be socket.io, websockets, TCP sockets, streams - anything you see fit.
* Separate your business logic from the client handling with ease.


### Examples
Examples of a TCP, socket.io and sockjs websocket servers can be found in listener.js

### How it works
Keeping it simple, there are only 2 parts to the system.
1. A listening process that listens out for new clients or users.
2. A logic process that contains your application.

##### Listener Process
Here is where you listen and accept client connections. You set up the server however you need. It could be TCP, websockets, socket.io, a stream; Anything. If it accepts connections and receives data, you can use it.
Listening on a unix socket by default for logic processes, this listener process alerts any logic processes of new clients and the data they send. It also accepts data to send back to the clients.


##### Logic Process
Here is where your application goes. Any number of these processes can be launched. It connects to the listener process via a unix socket by default to receive events of new clients and any data they send.
All client events are recieved with a client id which is generated by the listener process.
Keep this application logic stateless so that it can crash or be restarted easily without effecting clients.

##### Listener <-> Logic Protocol
JSON interface on both processes.
~~~~~
Logic process connects to Listener process
Listener > Logic   {type: TYPE_HELLO}
Listener > Logic   {type: TYPE_CLIENT_CONNECT, client:{node_id, client_id}}
Listener > Logic   {type: TYPE_FROM_CLIENT, client:{node_id, client_id}, data: "wooo"}
Logic > Listener   {type: TYPE_TO_CLIENT, client:{node_id, client_id}, data: "you said: wooo"}
~~~~~